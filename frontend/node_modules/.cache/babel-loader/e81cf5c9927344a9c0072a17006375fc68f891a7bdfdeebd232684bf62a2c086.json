{"ast":null,"code":"import _classCallCheck from\"C:/Users/Legion Pro/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/dev/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Legion Pro/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/dev/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var ApiAuth=/*#__PURE__*/function(){function ApiAuth(baseUrl){_classCallCheck(this,ApiAuth);this.baseUrl=baseUrl;}_createClass(ApiAuth,[{key:\"_checkAnswer\",value:function _checkAnswer(res){if(res.ok){return res.json();}return Promise.reject(res.status);}},{key:\"login\",value:function login(data){return fetch(\"\".concat(this.baseUrl,\"/signin\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(data)}).then(this._checkAnswer);}},{key:\"register\",value:function register(data){return fetch(\"\".concat(this.baseUrl,\"/signup\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(data)}).then(this._checkAnswer);}},{key:\"checkAuth\",value:function checkAuth(){var JWT=localStorage.getItem(\"jwt\");return fetch(\"\".concat(this.baseUrl,\"/users/me\"),{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(JWT)}}).then(this._checkAnswer);}}]);return ApiAuth;}();export var apiAuth=new ApiAuth(\"http://api.darimon.nomoredomains.xyz\");","map":{"version":3,"names":["ApiAuth","baseUrl","_classCallCheck","_createClass","key","value","_checkAnswer","res","ok","json","Promise","reject","status","login","data","fetch","concat","method","headers","body","JSON","stringify","then","register","checkAuth","JWT","localStorage","getItem","Authorization","apiAuth"],"sources":["C:/Users/Legion Pro/OneDrive/Рабочий стол/dev/react-mesto-api-full-gha/frontend/src/utils/ApiAuth.js"],"sourcesContent":["class ApiAuth {\n  constructor(baseUrl) {\n    this.baseUrl = baseUrl;\n  }\n  _checkAnswer(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(res.status);\n  }\n\n  login(data) {\n    return fetch(`${this.baseUrl}/signin`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(data),\n    }).then(this._checkAnswer);\n  }\n  register(data) {\n    return fetch(`${this.baseUrl}/signup`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(data),\n    }).then(this._checkAnswer);\n  }\n\n  checkAuth() {\n    const JWT = localStorage.getItem(\"jwt\");\n    return fetch(`${this.baseUrl}/users/me`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${JWT}`,\n      },\n    }).then(this._checkAnswer);\n  }\n}\nexport const apiAuth = new ApiAuth(\"http://api.darimon.nomoredomains.xyz\");\n"],"mappings":"ybAAM,CAAAA,OAAO,yBACX,SAAAA,QAAYC,OAAO,CAAE,CAAAC,eAAA,MAAAF,OAAA,EACnB,IAAI,CAACC,OAAO,CAAGA,OAAO,CACxB,CAACE,YAAA,CAAAH,OAAA,GAAAI,GAAA,gBAAAC,KAAA,CACD,SAAAC,aAAaC,GAAG,CAAE,CAChB,GAAIA,GAAG,CAACC,EAAE,CAAE,CACV,MAAO,CAAAD,GAAG,CAACE,IAAI,CAAC,CAAC,CACnB,CACA,MAAO,CAAAC,OAAO,CAACC,MAAM,CAACJ,GAAG,CAACK,MAAM,CAAC,CACnC,CAAC,GAAAR,GAAA,SAAAC,KAAA,CAED,SAAAQ,MAAMC,IAAI,CAAE,CACV,MAAO,CAAAC,KAAK,IAAAC,MAAA,CAAI,IAAI,CAACf,OAAO,YAAW,CACrCgB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACP,IAAI,CAC3B,CAAC,CAAC,CAACQ,IAAI,CAAC,IAAI,CAAChB,YAAY,CAAC,CAC5B,CAAC,GAAAF,GAAA,YAAAC,KAAA,CACD,SAAAkB,SAAST,IAAI,CAAE,CACb,MAAO,CAAAC,KAAK,IAAAC,MAAA,CAAI,IAAI,CAACf,OAAO,YAAW,CACrCgB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACP,IAAI,CAC3B,CAAC,CAAC,CAACQ,IAAI,CAAC,IAAI,CAAChB,YAAY,CAAC,CAC5B,CAAC,GAAAF,GAAA,aAAAC,KAAA,CAED,SAAAmB,UAAA,CAAY,CACV,GAAM,CAAAC,GAAG,CAAGC,YAAY,CAACC,OAAO,CAAC,KAAK,CAAC,CACvC,MAAO,CAAAZ,KAAK,IAAAC,MAAA,CAAI,IAAI,CAACf,OAAO,cAAa,CACvCgB,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCU,aAAa,WAAAZ,MAAA,CAAYS,GAAG,CAC9B,CACF,CAAC,CAAC,CAACH,IAAI,CAAC,IAAI,CAAChB,YAAY,CAAC,CAC5B,CAAC,WAAAN,OAAA,KAEH,MAAO,IAAM,CAAA6B,OAAO,CAAG,GAAI,CAAA7B,OAAO,CAAC,sCAAsC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}